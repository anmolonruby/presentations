<!DOCTYPE html>
<meta charset="utf-8">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<script src="js/rickshaw.min.js"></script>
<script src="js/d3.v3.min.js"></script>
<style>

@import url(stack.css);
@import url(code.css);

.big {
  font-size: 128px;
}

.caption {
  font-size: 96px;
  text-align: center;
  text-shadow: 0px 2px 6px rgba(0,0,0,.5);
}

</style>
<body class="overview">

<section>
  <p><b>d3</b>
  <p class="grey">(by @mbostock and crew. I'm @tmcw)</p>
</section>

<!--

* 5 minutes of 'stuff that's cool with d3 that should pique your interest'

* 1: primer: the difference between == and ===

* 2 minutes of how abstractions hurt and help you

* 5 minutes of stuff that d3 does that jquery did

* 1: primer: the difference between == and ===

* 10 minutes of dummy3 with == and === diff

* 5 minutes of how d3 actually does this

-->


<!-- ..................................................................... -->

<section>
<p><strong>What is d3?</strong></p>
</section>

<section>
<p><strong>Not a chart library</strong> (though you can make charts with it)</p>
<p><strong>Not a map library</strong> (though you can make maps with it)</p>
</section>

<section>
<p><strong>Not a compatibility layer</strong> (it doesn't work with bad browsers)</p>
<p><strong>Not about SVG or HTML or Canvas</strong> (though you can use it with them)</p>
</section>

<section>
<p><strong>not an SVG abstraction layer</strong></p>
<p>it doesn't have its own way of making a line or a circle. it makes
you deal with svg elements as svg elements. plus, you can deal with HTML
elements and Canvas elements!</p>
</section>

<section>
<p><strong>not an SVG abstraction layer</strong></p>
<p>If you want a soft, friendly wrapper, use Raphael, Processing.js, or
Paper.js</p>
</section>

<section>
<p><strong>d3 is a library for manipulating documents based on data</strong></p>
<p>The big aha moment is the fact that it does <em>joins</em> between data
and actions</p>
</section>

<section>
<p><strong>what $ does</strong></p>
<p>how do we make the DOM safer?<br />
how do we make fancy things easier?<br />
</p>
</section>

<section>
<p><strong>what d3 does</strong></p>
<p>how do we make <em>transformation</em> of data into documents safer?</p>
</section>

<!-- ..................................................................... -->

<section>
<p><strong>1: Cool Stuff Made With d3</strong></p>
<p>(switch tabs)</p>
</section>

<!-- ..................................................................... -->

<section>
<p><strong>2: d3 from the perspective of $</strong></p>
</section>

<section>
<pre><code>d3.select('#foo')
  .style('background', '#000')
  .on('click', function() {})
  .append($('&ltdiv&gt;&lt;/div&gt;'));

$('#foo')
  .css('background', '#000')
  .click(function() {})
  .append('div');
</code></pre>
</section>

<section>
<pre><code>d3.json('foo.json',
  function(err, data) { });

$.getJSON('foo.json',
  function(data) { });
</code></pre>
</section>

<!-- ..................................................................... -->

<section>
<p>that's just the silly stuff, though</p>
</section>

<section>
<pre><code>// a fully-featured jquery replacement
function $(x) {
  return document.querySelectorAll(x);
}
</pre></code>
</section>

<section>
<pre><code>// a fully-featured jquery replacement
$.ajax = function(url, callback) {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", url, true);
  xhr.onload = callback;
  xhr.send();
}
</pre></code>
</section>

<section style='background-image:url(oz.jpg)' />
</section>

<section>
<p>let's get to the hard stuff, then</p>
</section>

<section>
<p>Let's review some Javascript (1x)</p>
</section>

<section>
<a target='second' href='http://macwright.org/mistakes/#4679917'>what is the difference between == and ===?</a>
</section>

<section>
<p>cool!</p>
</section>

<section>
<p>now let's understand the hardest part of d3 by building it from scratch.</p>
</section>

<section>
<a target='second' href='http://macwright.org/mistakes/#4679425'>the final dish</a>
</section>

<section>
<p>you have the knowledge! time to d3.</p>
</section>

<section>
<pre><code>
d3.selectAll('div')
  .data([1, 2, 3])
  .enter()
  .append('div')
  .text(String);
</code></pre>
</section>

<section>
<pre><code>
// an empty selection.
// looking for instantiations of data
d3.selectAll('div')
</code></pre>
</section>

<section>
<pre><code>
// data, which would be bound to a
// selection
.data([1, 2, 3])
</code></pre>
</section>

<section>
<pre><code>
// for every time that we see data
// but we do not see an element
.enter()
</code></pre>
</section>

<section>
<pre><code>
// append an element
.append('div')
</code></pre>
</section>

<section>
<pre><code>
// and fill it with text
.text(String);
</code></pre>
</section>

<section>
<pre><code>
// and fill it with text
.text(String);
// wait what
</code></pre>
</section>

<section>
<pre><code>
// what's going on here?
.text(String);
</code></pre>
</section>

<section>
<pre><code>
d3.selectAll('div')
  .data([1, 2, 3])
  .enter()
  .append('div')
  .text(String);
</code></pre>
</section>

<section>
<pre><code>
// d3 has a few different
// functions that set stuff
.text()
.property()
.style()
.attr()
</code></pre>
</section>

<section>
<pre><code>
// each takes a function
.attr('foo', function() { })
</code></pre>
</section>

<section>
<pre><code>
// and that function gets data
// from your .data()
.attr('foo', function(d) {
  return d.foo;
})
</code></pre>
</section>

<section>
<pre><code>
// if you provide a static argument,
// it becomes a functor
.attr('foo', 5)
</code></pre>
</section>

<section>
<pre><code>
// here's what a functor is
function functor(x) {
  return function() {
    return x;
  };
}
</code></pre>
</section>

<section>
<p>
we just used a closure.<br />
don't know what a closure is?<br />
<a href='http://bit.ly/js-closure-explain'>bit.ly/js-closure-explain</a>
</p>
</section>

<section>
<pre><code>
// and what it does
var val = functor(10);

// val is now a function that
// always returns 10
assert.equal(val(), 10);
</code></pre>
</section>

<section>
<strong>end tangent</strong>
</section>

<section>
<p>but what did you mean by .enter()?</p>
<p>d3 is all about <strong>enter, exit, and update</strong></p>
</section>

<section>
<pre><code>// this is an empty selection
var selection = d3.selectAll('div')
  .data([1, 2, 3]);
</code></pre>
</section>

<section>
<pre><code>// for each part of the data which
// is not joined to an element in
// the selection,
// add an element
selection
  .enter()
  .append('div');
</code></pre>
</section>

<section>
<pre><code>// for each part of the selection
// that is no longer in the data,
// remove it
selection
  .exit()
  .remove();
</code></pre>
</section>

<section>
<pre><code>// for each part of the selection,
// update some attribute
selection
  .text(function(d) {
    return d.bar;
  });
</code></pre>
</section>

<section>
<p>so data is bound to the DOM</p>
<p><strong>but what does that mean?</strong></p>
</section>

<section>
<pre><code>// WE NEED TO GO DEEPER
// WHAT IS REALLY HAPPENING

&lt;div class='joined-elem'&gt;&lt;/div&gt;
// a joined element like this has
// a __data__ property where
// WE KEEP THE DATA
</code></pre>
</section>

<section>
<img src='bound_data.png' />
</section>

<section>
<p>we just awkwardly explained joins</p>
<p>read mike's explanations: <a href='http://bost.ocks.org/mike/join/'>http://bost.ocks.org/mike/join/</a>
<a href='http://mbostock.github.com/d3/tutorial/circle.html'>http://mbostock.github.com/d3/tutorial/circle.html</a></p>
</p>
</section>

<section>
<p><strong>Why must everything be so hard!?</strong></p>
</section>

<section>
<ol>
  <li>Changing the DOM is <strong>mad expensive</strong></li>
</ol>
</section>

<section>
<ol>
  <li>Changing the DOM is <strong>usually the most expensive part
  of your code unless you're a horrible Javascript coder</strong></li>
</ol>
</section>

<section>
<ol>
  <li>Changing the DOM is <strong>mad expensive</strong></li>
  <li>This makes animated transitions way slicker</li>
  <li>Post-eureka moment, it makes code way more compact</li>
  <li>Data updates, like real-time data or history viewers, become obvious rather than awful</li>
</ol>
</section>


<!-- ..................................................................... -->
<section>
<p><strong>5: d3 isn't for charts or ui. let's use it for charts and ui</strong></p>
</section>

<section>
<p><strong>charts</strong></p>
</section>

<section>
<p>want an abstraction? <strong>rickshaw</strong></p>
<div style='width:70%' id='rick'></div>
<script>
var graph = new Rickshaw.Graph({
element: document.querySelector("#rick"),
renderer: 'bar',
series: [{
  data: [{ x:0, y:40 }, { x:1, y:49 }],
  color: 'steelblue'
}, {
  data: [{ x:0, y:20 }, { x:1, y:24 }],
  color: 'lightblue'
}]
});

graph.renderer.unstack = true;
graph.render();
</script>
</section>

<section>
<p>want an abstraction? <strong>NVD3</strong></p>
<p>want an abstraction? <strong>xCharts</strong></p>
<p>want an abstraction? <strong>PolyChart</strong></p>
</section>



<section>
<code><pre>var graph = new Rickshaw.Graph({
element: document.querySelector("#rick"),
renderer: 'bar',
series:[{
  data:[{ x:0, y:40 }, { x:1, y:49 }],
  color:'steelblue'
}, {
  data:[{ x:0, y:20 }, { x:1, y:24 }],
  color:'lightblue'
}]});
</pre></code>
</section>



<section>
<p><strong>d3-bootstrap</strong></p>
</section>


<!-- ..................................................................... -->

<section>
<p><strong>4: Postscript, Where to Go From Here</strong>
</section>

<section>
<p><strong>Buy <a href='http://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448'>The Grammar of Graphics</a></strong></p>
<p>It is not about d3.</p>
<p>d3 is about it.</p>
</section>

<section>
<p><strong>See <a href='http://bl.ocks.org/mbostock'>Mike's bits of code</a></strong></p>
<p>It's zany.</p>
</section>

<section>
<p><strong>People who write about this</strong>
<ul>
  <li><a href='http://www.jasondavies.com/'>jasondavies.com</a>,
  <li><a href='http://mbostock.github.com/'>mbostock.github.com</a>,
  <li><a href='http://alignedleft.com/tutorials/'>alignedleft.com/tutorials</a>
  <li><a href='http://macwright.org'>macwright.org (me)</a>,
</ul>
</p>
</section>

<script src="stack.v0.js"></script>
<script src="highlight.v0.js"></script>
